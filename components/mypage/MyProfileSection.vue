<template>
  <v-card flat class="pa-4" v-if="user">
    <v-avatar size="80" class="mb-3">
      <v-img :src="user.profileImageUrl || 'https://via.placeholder.com/80'" />
    </v-avatar>
    <div class="text-h6 font-weight-bold">{{ user.nickname }}</div>
    <div class="text-body-2">{{ user.email }}</div>
    <v-divider class="my-4" />
    <div>
      <p>ğŸªª í”Œëœ: <strong>{{ user.isPremium ? 'í”„ë¦¬ë¯¸ì—„' : 'ë¬´ë£Œ ì‚¬ìš©ì' }}</strong></p>
      <p v-if="user.isPremium">â³ ë§Œë£Œì¼: {{ formatDate(user.planExpireAt) }}</p>
      <p>ğŸŸ ë“±ë¡ê¶Œ: {{ user.ticketCount ?? 0 }}ê°œ</p>
      <p>ğŸ ì´ˆëŒ€ ë³´ìƒ: ë“±ë¡ê¶Œ {{ user.inviteRewardCount ?? 0 }}ê°œ</p>
    </div>
  </v-card>
</template>

<script setup lang="ts">
import { useAuthStore } from '@/stores/authStore'
import { storeToRefs } from 'pinia'

const { user } = storeToRefs(useAuthStore())

const formatDate = (iso: string) => {
  if (!iso) return ''
  return new Date(iso).toLocaleDateString('ko-KR')
}
</script>
